<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ¢ãƒ¼ã‚¿ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚¿å®Œå…¨æ”»ç•¥ã‚¯ã‚¤ã‚º</title>
    <style>
        :root { --primary: #00d2ff; --accent: #ff007a; --bg: #0b0e14; --card: #151a24; --text: #e0e6ed; }
        body { font-family: 'Hiragino Kaku Gothic ProN', 'Meiryo', sans-serif; background: var(--bg); color: var(--text); margin: 0; display: flex; justify-content: center; min-height: 100vh; overflow-x: hidden; }
        
        #quiz-container { background: var(--card); width: 95%; max-width: 650px; padding: 25px; border-radius: 24px; box-shadow: 0 0 40px rgba(0,210,255,0.2); margin: 20px; align-self: center; border: 1px solid rgba(255,255,255,0.1); position: relative; }
        
        .status-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; font-size: 0.9rem; }
        #combo-display { color: var(--accent); font-weight: bold; font-size: 1.4rem; transition: 0.2s; text-shadow: 0 0 10px var(--accent); }
        
        .progress-bar { width: 100%; height: 6px; background: #2d3436; border-radius: 3px; margin-bottom: 25px; overflow: hidden; }
        #progress-fill { height: 100%; background: linear-gradient(90deg, var(--primary), var(--accent)); width: 0%; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

        .question { font-size: 1.25rem; line-height: 1.6; margin-bottom: 25px; font-weight: 600; min-height: 4em; }
        .choices { display: grid; gap: 12px; }
        
        button.choice { 
            padding: 16px 20px; border: 1px solid rgba(255,255,255,0.15); border-radius: 12px; 
            background: rgba(255,255,255,0.05); color: var(--text); cursor: pointer; 
            text-align: left; font-size: 1rem; transition: 0.2s;
        }
        button.choice:hover:not(:disabled) { background: rgba(0,210,255,0.15); border-color: var(--primary); transform: translateX(8px); }
        button.choice:active { transform: scale(0.98); }
        button.choice:disabled { cursor: default; }

        #feedback { display: none; margin-top: 20px; padding: 18px; border-radius: 12px; animation: popIn 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55); border-left: 6px solid; }
        @keyframes popIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .correct-ui { background: rgba(0,255,136,0.1); border-color: #00ff88; color: #00ff88; }
        .incorrect-ui { background: rgba(255,71,87,0.1); border-color: #ff4757; color: #ff4757; }

        #next-btn { 
            display: none; width: 100%; margin-top: 20px; padding: 18px; 
            background: linear-gradient(45deg, #00d2ff, #3a7bd5); color: white; 
            border: none; border-radius: 50px; cursor: pointer; font-size: 1.1rem; font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,210,255,0.3);
        }

        #result-screen { display: none; text-align: center; animation: fadeIn 0.8s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .rank-medal { font-size: 5rem; margin-bottom: 10px; }
        .score-val { font-size: 4rem; font-weight: 900; background: linear-gradient(to bottom, #fff, var(--primary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    </style>
</head>
<body>

<div id="quiz-container">
    <div id="quiz-screen">
        <div class="status-header">
            <span id="q-count">01 / 30</span>
            <div id="combo-display"></div>
            <span id="timer">15:00</span>
        </div>
        <div class="progress-bar"><div id="progress-fill"></div></div>
        
        <div class="question" id="question-text">Loading...</div>
        <div class="choices" id="choices"></div>

        <div id="feedback"></div>
        <button id="next-btn" onclick="handleNext()">NEXT MISSION &gt;&gt;</button>
    </div>

    <div id="result-screen">
        <div id="medal" class="rank-medal">âš™ï¸</div>
        <h2>MISSION COMPLETED</h2>
        <div class="score-val" id="score-display">0 / 30</div>
        <p id="rank-name" style="font-size: 1.6rem; color: var(--accent); font-weight: bold; margin: 10px 0;"></p>
        <p id="rank-comment" style="margin-bottom: 30px; line-height: 1.8; color: #a0a0a0;"></p>
        <button onclick="location.reload()" style="padding:15px 50px; background:var(--primary); color:white; border:none; border-radius:50px; cursor:pointer; font-weight:bold; font-size:1.1rem;">RETRY</button>
    </div>
</div>

<script>
const quizData = [
  { q: "ã‚½ãƒ¬ãƒã‚¤ãƒ‰ã¯ã€ã©ã®ã‚ˆã†ãªåŠ›ã‚’åˆ©ç”¨ã—ã¦å‹•ä½œã—ã¾ã™ã‹ï¼Ÿ", a: "é›»ç£çŸ³ã®å¸å¼•åŠ›",
    o: ["é™é›»æ°—ã®åŠ›", "æ°¸ä¹…ç£çŸ³ã®åç™ºåŠ›", "é‡åŠ›"] },

  { q: "ã‚½ãƒ¬ãƒã‚¤ãƒ‰ã®ãƒ—ãƒ«å½¢ã¨ã¯ã€ã©ã®ã‚ˆã†ãªåŠ›ã‚’åˆ©ç”¨ã™ã‚‹ã‚‚ã®ã§ã™ã‹ï¼Ÿ", a: "å¼•ãåŠ›",
    o: ["æŠ¼ã™åŠ›", "å›è»¢ã™ã‚‹åŠ›", "ã­ã˜ã‚‹åŠ›"] },

  { q: "ã‚½ãƒ¬ãƒã‚¤ãƒ‰ã®å¯å‹•é‰„å¿ƒãŒç§»å‹•ã§ãã‚‹è·é›¢ã‚’ä½•ã¨ã„ã„ã¾ã™ã‹ï¼Ÿ", a: "ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯",
    o: ["ãƒ”ãƒƒãƒ", "ã‚®ãƒ£ãƒƒãƒ—", "ã‚¹ãƒ‘ãƒ³"] },

  { q: "ç›´æµãƒ¢ãƒ¼ã‚¿ã§ã€å›è»¢ä¸­ã‚‚ãƒˆãƒ«ã‚¯ãŒä¸€å®šæ–¹å‘ã«ç”Ÿã˜ã‚‹ã‚ˆã†ã€å°ä½“ã«æµã‚Œã‚‹é›»æµã®å‘ãã‚’åˆ‡ã‚Šæ›ãˆã‚‹éƒ¨å“ã¯ä½•ã§ã™ã‹ï¼Ÿ", a: "æ•´æµå­",
    o: ["ãƒ–ãƒ©ã‚·", "é›»æ©Ÿå­", "ç•Œç£"] },

  { q: "ç›´æµãƒ¢ãƒ¼ã‚¿ã®åŸç†ã§ã€ç£ç•Œä¸­ã®å°ä½“ãŒå—ã‘ã‚‹åŠ›ã®å‘ãã‚’æ±ºå®šã™ã‚‹æ³•å‰‡ã¯ä½•ã§ã™ã‹ï¼Ÿ", a: "ãƒ•ãƒ¬ãƒŸãƒ³ã‚°ã®å·¦æ‰‹ã®æ³•å‰‡",
    o: ["ãƒ•ãƒ¬ãƒŸãƒ³ã‚°ã®å³æ‰‹ã®æ³•å‰‡", "ãƒ¬ãƒ³ãƒ„ã®æ³•å‰‡", "ã‚¢ãƒ³ãƒšã‚¢ã®å³ã­ã˜ã®æ³•å‰‡"] },

  { q: "ç›´æµãƒ¢ãƒ¼ã‚¿ã§ã€ç£ç•Œã‚’ã¤ãã‚‹ãŸã‚ã«å›ºå®šã•ã‚Œã¦ã„ã‚‹éƒ¨åˆ†ã‚’ä½•ã¨ã„ã„ã¾ã™ã‹ï¼Ÿ", a: "å›ºå®šå­ï¼ˆç•Œç£ï¼‰",
    o: ["é›»æ©Ÿå­", "æ•´æµå­", "å›è»¢å­"] },

  { q: "ç›´æµãƒ¢ãƒ¼ã‚¿ã§ã€å›è»¢ã—ã¦é›»æµãŒæµã‚Œã‚‹ä¸­å¿ƒéƒ¨åˆ†ã‚’ä½•ã¨ã„ã„ã¾ã™ã‹ï¼Ÿ", a: "é›»æ©Ÿå­",
    o: ["å›ºå®šå­", "ç•Œç£", "ãƒ¨ãƒ¼ã‚¯"] },

  { q: "ç›´æµãƒ¢ãƒ¼ã‚¿ã®æ•´æµå­ã«æ¥è§¦ã—ã€å¤–éƒ¨å›è·¯ã¨é›»æµã‚’ã‚„ã‚Šå–ã‚Šã™ã‚‹éƒ¨å“ã¯ä½•ã§ã™ã‹ï¼Ÿ", a: "ãƒ–ãƒ©ã‚·",
    o: ["ãƒ™ã‚¢ãƒªãƒ³ã‚°", "ã‚·ãƒ£ãƒ•ãƒˆ", "ã‚³ã‚¢"] },

  { q: "ã‚¢ãƒ©ã‚´ã®å††æ¿ã®å®Ÿé¨“ã§ã€ç£çŸ³ã‚’å‹•ã‹ã™ã¨ã‚¢ãƒ«ãƒŸãƒ‹ã‚¦ãƒ å††æ¿ãŒå›è»¢ã™ã‚‹ä¸»ãªç†ç”±ã¯ä½•ã§ã™ã‹ï¼Ÿ", a: "æ¸¦é›»æµã¨ç£æŸã®ç›¸äº’ä½œç”¨",
    o: ["é™é›»æ°—ã®ç™ºç”Ÿ", "æ‘©æ“¦åŠ›", "é‡åŠ›"] },

  { q: "å˜ç›¸äº¤æµãƒ¢ãƒ¼ã‚¿ã§ã€å›è»¢ç£ç•Œã‚’ç™ºç”Ÿã•ã›ã‚‹ãŸã‚ã«ç”¨ã„ã‚‰ã‚Œã‚‹éƒ¨å“ã¯ä½•ã§ã™ã‹ï¼Ÿ", a: "ã‚³ãƒ³ãƒ‡ãƒ³ã‚µ",
    o: ["ãƒ€ã‚¤ã‚ªãƒ¼ãƒ‰", "ãƒˆãƒ©ãƒ³ã‚¸ã‚¹ã‚¿", "æŠµæŠ—å™¨"] },

  { q: "ã‚³ãƒ³ãƒ‡ãƒ³ã‚µãƒ¢ãƒ¼ã‚¿ã§ã€å§‹å‹•ã‚³ã‚¤ãƒ«ã®é›»æµã¯ä¸»ã‚³ã‚¤ãƒ«ã®é›»æµã‚ˆã‚Šç´„ä½•åº¦ä½ç›¸ãŒé€²ã¿ã¾ã™ã‹ï¼Ÿ", a: "90åº¦",
    o: ["60åº¦", "120åº¦", "180åº¦"] },

  { q: "ä¸‰ç›¸äº¤æµã§å›è»¢ç£ç•Œã‚’ä½œã‚‹å ´åˆã€å„ç›¸ã®ã‚³ã‚¤ãƒ«ã¯ä½•åº¦ãšã¤ãšã‚‰ã—ã¦é…ç½®ã•ã‚Œã¾ã™ã‹ï¼Ÿ", a: "120åº¦",
    o: ["60åº¦", "90åº¦", "180åº¦"] },

  { q: "äº¤æµãƒ¢ãƒ¼ã‚¿ã«ãŠã„ã¦ã€å›è»¢ç£ç•ŒãŒå›è»¢ã™ã‚‹é€Ÿåº¦ã‚’ä½•ã¨ã„ã„ã¾ã™ã‹ï¼Ÿ", a: "åŒæœŸé€Ÿåº¦",
    o: ["å®šæ ¼é€Ÿåº¦", "å®Ÿå›è»¢é€Ÿåº¦", "è§’é€Ÿåº¦"] },

  { q: "ä¸‰ç›¸èª˜å°ãƒ¢ãƒ¼ã‚¿ã®å›è»¢å­ã§ã€ã‚¢ãƒ«ãƒŸãƒ‹ã‚¦ãƒ å°ä½“ã‚’ã‹ã”çŠ¶ã«é…ç½®ã—ãŸã‚‚ã®ã‚’ä½•ã¨ã„ã„ã¾ã™ã‹ï¼Ÿ", a: "ã‹ã”å½¢å›è»¢å­",
    o: ["å·»ç·šå½¢å›è»¢å­", "æ°¸ä¹…ç£çŸ³å›è»¢å­", "ç›´å·»å›è»¢å­"] },

  { q: "ç›´æµãƒ¢ãƒ¼ã‚¿ã§ã€ç•Œç£å·»ç·šã¨é›»æ©Ÿå­å·»ç·šã‚’ä¸¦åˆ—ã«æ¥ç¶šã—ãŸæ–¹å¼ã‚’ä½•ã¨ã„ã„ã¾ã™ã‹ï¼Ÿ", a: "åˆ†å·»ãƒ¢ãƒ¼ã‚¿",
    o: ["ç›´å·»ãƒ¢ãƒ¼ã‚¿", "è¤‡å·»ãƒ¢ãƒ¼ã‚¿", "æ°¸ä¹…ç£çŸ³ãƒ¢ãƒ¼ã‚¿"] },

  { q: "è² è·ãŒå¤‰åŒ–ã—ã¦ã‚‚ã€å›è»¢é€Ÿåº¦ãŒã»ã¼ä¸€å®šã«ä¿ãŸã‚Œã‚‹ç›´æµãƒ¢ãƒ¼ã‚¿ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ", a: "åˆ†å·»ãƒ¢ãƒ¼ã‚¿",
    o: ["ç›´å·»ãƒ¢ãƒ¼ã‚¿", "è¤‡å·»ãƒ¢ãƒ¼ã‚¿", "èª˜å°ãƒ¢ãƒ¼ã‚¿"] },

  { q: "é›»è»Šã‚„ã‚¯ãƒ¬ãƒ¼ãƒ³ãªã©ã§ä½¿ç”¨ã•ã‚Œã€å¤§ããªå§‹å‹•ãƒˆãƒ«ã‚¯ãŒå¿…è¦ãªå ´åˆã«é©ã—ãŸç›´æµãƒ¢ãƒ¼ã‚¿ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ", a: "ç›´å·»ãƒ¢ãƒ¼ã‚¿",
    o: ["åˆ†å·»ãƒ¢ãƒ¼ã‚¿", "åŒæœŸãƒ¢ãƒ¼ã‚¿", "èª˜å°ãƒ¢ãƒ¼ã‚¿"] },

  { q: "æŠµæŠ—ãŒä¸€å®šã§ã‚ã‚‹ã¨ãã€ã‚½ãƒ¬ãƒã‚¤ãƒ‰ã®å¸å¼•åŠ›ã¯åŠ ãˆã‚‹é›»åœ§ã®ä½•ã«æ¯”ä¾‹ã—ã¾ã™ã‹ï¼Ÿ", a: "2ä¹—",
    o: ["1ä¹—", "3ä¹—", "å¹³æ–¹æ ¹"] },

  { q: "ç›´æµãƒ¢ãƒ¼ã‚¿ã®å›è»¢æ–¹å‘ã‚’é€†ã«ã™ã‚‹æ–¹æ³•ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ", a: "é›»æ©Ÿå­ã«æµã™é›»æµã®å‘ãã‚’é€†ã«ã™ã‚‹",
    o: ["é›»åœ§ã‚’ä¸Šã’ã‚‹", "å›è»¢æ•°ã‚’ä¸Šã’ã‚‹", "ç•Œç£ã‚’å¼·ãã™ã‚‹"] },

  { q: "äº¤æµãƒ¢ãƒ¼ã‚¿ã§ã€åŒæœŸé€Ÿåº¦ã¨å®Ÿéš›ã®å›è»¢é€Ÿåº¦ã¨ã®å·®ã®å‰²åˆã‚’ä½•ã¨ã„ã„ã¾ã™ã‹ï¼Ÿ", a: "æ»‘ã‚Š",
    o: ["èª¤å·®", "å›è»¢å·®", "ä½ç›¸å·®"] },

  { q: "ä¸‰ç›¸åŒæœŸãƒ¢ãƒ¼ã‚¿ã¯ã€å›è»¢ç£ç•Œã¨ã©ã®ã‚ˆã†ãªé€Ÿåº¦é–¢ä¿‚ã§å›è»¢ã—ã¾ã™ã‹ï¼Ÿ", a: "åŒã˜é€Ÿåº¦ï¼ˆåŒæœŸé€Ÿåº¦ï¼‰",
    o: ["å›è»¢ç£ç•Œã‚ˆã‚Šé€Ÿã„", "å›è»¢ç£ç•Œã‚ˆã‚Šé…ã„", "è² è·ã«ã‚ˆã‚Šå¤‰åŒ–ã™ã‚‹"] },

  { q: "ç›´æµé›»æºã‚’ç”¨ã„ã¦äº¤æµã‚’ç™ºç”Ÿã•ã›ã‚‹è£…ç½®ã‚’ä½•ã¨ã„ã„ã¾ã™ã‹ï¼Ÿ", a: "ã‚¤ãƒ³ãƒãƒ¼ã‚¿",
    o: ["ã‚³ãƒ³ãƒãƒ¼ã‚¿", "ãƒ¬ã‚®ãƒ¥ãƒ¬ãƒ¼ã‚¿", "ãƒˆãƒ©ãƒ³ã‚¹"] },

  { q: "ãƒ–ãƒ©ã‚·ãƒ¬ã‚¹ãƒ¢ãƒ¼ã‚¿ã®ä¸»ãªåˆ©ç‚¹ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ", a: "ãƒ–ãƒ©ã‚·ã®æ‘©è€—ã‚„ç«èŠ±ç™ºç”Ÿã®å¿ƒé…ãŒãªã„",
    o: ["å§‹å‹•ãƒˆãƒ«ã‚¯ãŒéå¸¸ã«å¤§ãã„", "æ§‹é€ ãŒå˜ç´”ã§å®‰ä¾¡", "åˆ¶å¾¡ãŒä¸è¦"] },

  { q: "ã‚½ãƒ¬ãƒã‚¤ãƒ‰ã«ãŠã„ã¦ã€å‹•ä½œé–‹å§‹æ™‚ã®é›»æµã¯ä¿æŒçŠ¶æ…‹ã®é›»æµã®ãŠã‚ˆãä½•å€ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ", a: "8å€",
    o: ["2å€", "4å€", "16å€"] },

  { q: "ã‚¢ãƒ³ãƒšã‚¢ã®å³ã­ã˜ã®æ³•å‰‡ã¯ã€ä¸»ã«ä½•ã®å‘ãã‚’æ±ºå®šã™ã‚‹ãŸã‚ã«ä½¿ã‚ã‚Œã¾ã™ã‹ï¼Ÿ", a: "ç£ç•Œã®å‘ã",
    o: ["é›»æµã®å‘ã", "åŠ›ã®å‘ã", "é›»åœ§ã®å‘ã"] },

  { q: "ç›´æµãƒ¢ãƒ¼ã‚¿ãŒå›è»¢ã™ã‚‹ã¨ç™ºç”Ÿã™ã‚‹èª˜å°èµ·é›»åŠ›ã®ã¯ãŸã‚‰ãã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ", a: "æµã‚Œã‚‹é›»æµã‚’å°ã•ãã™ã‚‹å‘ãã«ã¯ãŸã‚‰ã",
    o: ["é›»æµã‚’å¤§ããã™ã‚‹å‘ãã«ã¯ãŸã‚‰ã", "å›è»¢ã‚’é€Ÿãã™ã‚‹å‘ãã«ã¯ãŸã‚‰ã", "é›»åœ§ã‚’ä¸€å®šã«ä¿ã¤"] },

  { q: "å˜ç›¸äº¤æµãƒ¢ãƒ¼ã‚¿ã§å›è»¢æ–¹å‘ã‚’å¤‰ãˆã‚‹æ–¹æ³•ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ", a: "ä¸»ã‚³ã‚¤ãƒ«ã¨å§‹å‹•ã‚³ã‚¤ãƒ«ã®æ¥ç¶šã‚’å…¥ã‚Œæ›¿ãˆã‚‹",
    o: ["é›»åœ§ã‚’ä¸Šã’ã‚‹", "å‘¨æ³¢æ•°ã‚’å¤‰ãˆã‚‹", "ã‚³ãƒ³ãƒ‡ãƒ³ã‚µã‚’å¤§ããã™ã‚‹"] },

  { q: "ä¸‰ç›¸èª˜å°ãƒ¢ãƒ¼ã‚¿ã§ã€1æ¥µå¯¾ã®åŸºæœ¬æ§‹é€ ã®å ´åˆã€ç£æ¥µæ•°ã¯ã„ãã¤ã§ã™ã‹ï¼Ÿ", a: "2",
    o: ["3", "4", "6"] },

  { q: "VVVFåˆ¶å¾¡ã¨ã¯ã€ä¸»ã«ä½•ã‚’å¤‰åŒ–ã•ã›ã¦ãƒ¢ãƒ¼ã‚¿ã®å›è»¢ã‚’åˆ¶å¾¡ã™ã‚‹æ–¹å¼ã§ã™ã‹ï¼Ÿ", a: "é›»åœ§ã¨å‘¨æ³¢æ•°",
    o: ["é›»æµã¨é›»åœ§", "å‘¨æ³¢æ•°ã¨ä½ç›¸", "å›è»¢æ•°ã¨ãƒˆãƒ«ã‚¯"] },

  { q: "èª˜å°ãƒ¢ãƒ¼ã‚¿ãŒç„¡è² è·ã§é‹è»¢ã•ã‚Œã¦ã„ã‚‹ã¨ãã€æ»‘ã‚Šã¯ä½•ï¼…ã«è¿‘ã„ã§ã™ã‹ï¼Ÿ", a: "0ï¼…",
    o: ["10ï¼…", "50ï¼…", "100ï¼…"] }
];

let currentIdx = 0, score = 0, combo = 0, maxCombo = 0, timeLeft = 900;
let shuffledData = [];

function initQuiz() {
    shuffledData = quizData.map(item => {
        const choices = [item.a, ...item.o].sort(() => Math.random() - 0.5);
        return { ...item, choices, correctIdx: choices.indexOf(item.a) };
    });
    startTimer();
    renderQuestion();
}

function startTimer() {
    setInterval(() => {
        if (timeLeft <= 0) return;
        timeLeft--;
        const min = Math.floor(timeLeft / 60), sec = timeLeft % 60;
        document.getElementById('timer').innerText = `${min}:${sec < 10 ? '0'+sec : sec}`;
    }, 1000);
}

function renderQuestion() {
    const data = shuffledData[currentIdx];
    document.getElementById('q-count').innerText = `${(currentIdx + 1).toString().padStart(2, '0')} / 30`;
    document.getElementById('progress-fill').style.width = `${(currentIdx / 30) * 100}%`;
    document.getElementById('question-text').innerText = data.q;
    
    const choicesContainer = document.getElementById('choices');
    choicesContainer.innerHTML = '';
    data.choices.forEach((choice, i) => {
        const btn = document.createElement('button');
        btn.className = 'choice';
        btn.innerText = choice;
        btn.onclick = () => checkAnswer(i);
        choicesContainer.appendChild(btn);
    });

    document.getElementById('feedback').style.display = 'none';
    document.getElementById('next-btn').style.display = 'none';
}

function checkAnswer(idx) {
    const data = shuffledData[currentIdx];
    const feedback = document.getElementById('feedback');
    const comboDisplay = document.getElementById('combo-display');
    const buttons = document.querySelectorAll('.choice');
    
    buttons.forEach(btn => btn.disabled = true);
    feedback.style.display = 'block';

    if (idx === data.correctIdx) {
        score++; combo++;
        if (combo > maxCombo) maxCombo = combo;
        feedback.className = 'correct-ui';
        feedback.innerHTML = `<strong>æ­£è§£ï¼</strong> æ­£è§£ã¯ã€Œ${data.a}ã€ã§ã™ã€‚`;
        comboDisplay.innerText = `${combo} COMBO`;
        comboDisplay.style.transform = "scale(1.3)";
        setTimeout(() => comboDisplay.style.transform = "scale(1)", 200);
    } else {
        combo = 0;
        feedback.className = 'incorrect-ui';
        feedback.innerHTML = `<strong>ä¸æ­£è§£...</strong> æ­£è§£ã¯ã€Œ${data.a}ã€ã§ã—ãŸã€‚`;
        comboDisplay.innerText = '';
    }
    document.getElementById('next-btn').style.display = 'block';
}

function handleNext() {
    currentIdx++;
    if (currentIdx < shuffledData.length) renderQuestion();
    else showResult();
}

function showResult() {
    document.getElementById('quiz-screen').style.display = 'none';
    document.getElementById('result-screen').style.display = 'block';
    document.getElementById('score-display').innerText = `${score} / 30`;
    
    let rank = "", medal = "", comment = "";
    const rate = score / 30;

    if (rate >= 0.9) { rank = "ACTUATOR MASTER"; medal = "ğŸ‘‘"; comment = "å®Œç’§ã§ã™ï¼ãƒ¢ãƒ¼ã‚¿ã®æ§‹é€ ã‹ã‚‰åˆ¶å¾¡ã¾ã§å®Œå…¨ã«æŒæ¡ã—ã¾ã—ãŸã€‚"; }
    else if (rate >= 0.7) { rank = "SENIOR ENGINEER"; medal = "ğŸ¥‡"; comment = "ç´ æ™´ã‚‰ã—ã„æˆç¸¾ã§ã™ã€‚å®Ÿç¿’ã§ã‚‚è‡ªä¿¡ã‚’æŒã£ã¦å–ã‚Šçµ„ã‚ã¾ã™ã€‚"; }
    else if (rate >= 0.4) { rank = "OPERATOR"; medal = "ğŸ¥ˆ"; comment = "åŸºæœ¬ã¯æŠ¼ã•ãˆã¦ã„ã¾ã™ã€‚é–“é•ãˆãŸç”¨èªã‚’ã‚‚ã†ä¸€åº¦è¦‹ç›´ã—ã¾ã—ã‚‡ã†ã€‚"; }
    else { rank = "TRAINEE"; medal = "ğŸ¥‰"; comment = "åŸºç¤ã‹ã‚‰ã‚‚ã†ä¸€åº¦å¾©ç¿’ãŒå¿…è¦ã§ã™ã€‚ç‰¹ã«ç›´æµã¨äº¤æµã®é•ã„ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚"; }

    document.getElementById('rank-name').innerText = rank;
    document.getElementById('medal').innerText = medal;
    document.getElementById('rank-comment').innerText = `${comment}\n(æœ€å¤§ã‚³ãƒ³ãƒœ: ${maxCombo})`;
}

initQuiz();
</script>

</body>
</html>